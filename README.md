# Portal Predictions
[![Build Status](https://travis-ci.org/weecology/portalPredictions.svg?branch=master)](https://travis-ci.org/weecology/portalPredictions)
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.833438.svg)](https://doi.org/10.5281/zenodo.833438)
[![License](http://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/weecology/portalPredictions/master/LICENSE)

#### [Portal Forecasting Website](http://portal.naturecast.org/)

This is the main repository for predictions made on the Portal rodent census data [Portal Project](http://portal.weecology.org/).

Predictions are made and archived weekly. Approximately once a month, one of these forecasts is made immediately prior to a new trapping session (trapping occurs as close to each new moon as possible).

## How to add a new model

Models currently in use are in the [models](models) directory. All the information needed to make a new forecast can be found in [tools](tools), which is updated weekly before new forecasts are made. This includes rodent and weather data files. `model.yaml` includes information that can be used to ensure that your model's forecast information matches other models forecasting the same data at the same time.

Forecasts generated by each of the models in [models](models) are saved in the [tmp](tmp) directory, before being combined into a single file, used to build ensemble forecasts, saved in the [predictions](predictions) directory, and archived. For your model to be included in this process, it must meet specific standards. It must generate forecasts with specific columns names, saved to a file in [tmp](tmp) that ends in `[modelname][level]forecasts.csv`. It must also generate a list of AIC values, also with specific column names, saved to a file in [tmp](tmp) named `[modelname][level]forecasts_model_aic.csv`. See the [Forecast file format wiki page](https://github.com/weecology/portalPredictions/wiki/Forecast-file-format) for more details.

## Docker builds

Forecasts are run using Travis CI based on a docker image. This makes the builds
faster and more reproducible. When adding new packages to this repo it may be
necessary to update the Docker container using the following commands:

```
sudo docker build -t weecology/portal_predictions .
sudo docker push weecology/portal_predictions
```
